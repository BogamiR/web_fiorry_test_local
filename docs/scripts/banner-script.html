<script>
    function getIOSVersion() {
        const userAgent = navigator.userAgent;
        const isIOS = /iPhone|iPad|iPod/.test(userAgent) && !window.MSStream;

        console.log("DEBUG: User-Agent:", userAgent);
        console.log("DEBUG: isIOS:", isIOS);

        if (isIOS) {
            const match = userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);
            if (match && match.length > 2) {
                const version = parseFloat(match[1] + '.' + match[2]);
                return version;
            }
        }
        return 0;
    }

    document.addEventListener('DOMContentLoaded', function() {
        const loaderContainer = document.getElementById('loader-container');
        const unsupportedBanner = document.getElementById('unsupported-banner');

        if (loaderContainer) loaderContainer.style.display = 'flex';
        if (unsupportedBanner) unsupportedBanner.style.display = 'none';

        const isIOS = /iPhone|iPad|iPod/.test(userAgent) && !window.MSStream;
        if (!isIOS) { return; }

        const requiredIOSVersion = 18.2;
        const currentIOSVersion = getIOSVersion();

        console.log(`DEBUG: Checking iOS version: Current=${currentIOSVersion}, Required=${requiredIOSVersion}`);

        if (currentIOSVersion > 0 && currentIOSVersion < requiredIOSVersion) {
            if (loaderContainer) loaderContainer.style.display = 'none';
            if (unsupportedBanner) unsupportedBanner.style.display = 'flex';
            return;
        }
    });
</script>